@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   SESSION V2 - THEME SYSTEM
   Two themes: Neon Lime & Sunset Coral
   ======================================== */

:root {
  /* Default to Neon Lime theme */
  --v2-primary: #ccff00;
  --v2-primary-dim: #a8d600;
  --v2-primary-glow: rgba(204, 255, 0, 0.4);
  --v2-bg-deep: #0d0612;
  --v2-bg-card: rgba(26, 10, 46, 0.6);
  --v2-bg-card-hover: rgba(26, 10, 46, 0.8);
  --v2-border: rgba(204, 255, 0, 0.15);
  --v2-border-strong: rgba(204, 255, 0, 0.3);
  --v2-text-primary: #ffffff;
  --v2-text-secondary: rgba(255, 255, 255, 0.6);
  --v2-text-muted: rgba(255, 255, 255, 0.4);
  --v2-accent-purple: #9d4edd;
  --v2-gradient-start: #1a0a2e;
  --v2-gradient-end: #0d0612;
  --v2-success: #00f5a0;
  --v2-warning: #ffd166;
  --v2-danger: #ff006e;
  
  /* Animation timings */
  --v2-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --v2-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --v2-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* ========================================
   BASE STYLES
   ======================================== */

.v2-page {
  min-height: 100vh;
  background: var(--v2-bg-deep);
  color: var(--v2-text-primary);
  font-family: var(--font-space-grotesk), system-ui, sans-serif;
  overflow-x: hidden;
  /* Fix black box artifact on mobile Safari */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

/* Fix for mobile Safari sticky/backdrop-filter rendering issues */
@supports (-webkit-touch-callout: none) {
  .v2-page {
    /* Force hardware acceleration */
    -webkit-transform: translate3d(0, 0, 0);
    transform: translate3d(0, 0, 0);
    /* Prevent black box artifacts from overflow */
    -webkit-overflow-scrolling: touch;
  }
  
  /* Disable backdrop-filter on iOS to prevent black box artifacts */
  .sticky {
    -webkit-backdrop-filter: none !important;
    backdrop-filter: none !important;
  }
}

/* Fix black box in filter tabs on mobile */
.v2-filter-tabs-fix {
  /* Force GPU layer to prevent compositing issues */
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* ========================================
   ANIMATED MESH BACKGROUND
   ======================================== */

.v2-mesh-bg {
  position: fixed;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
  /* Prevent compositing issues on mobile */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
}

.v2-mesh-gradient {
  position: absolute;
  inset: -50%;
  background: 
    radial-gradient(ellipse 80% 50% at 20% 40%, var(--v2-primary-glow) 0%, transparent 50%),
    radial-gradient(ellipse 60% 40% at 80% 20%, var(--v2-accent-purple) 0%, transparent 40%),
    radial-gradient(ellipse 50% 60% at 50% 80%, var(--v2-primary-glow) 0%, transparent 45%);
  animation: meshFloat 20s ease-in-out infinite;
  opacity: 0.6;
}

.v2-mesh-blob {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  animation: blobFloat 15s ease-in-out infinite;
}

.v2-mesh-blob-1 {
  width: 600px;
  height: 600px;
  background: var(--v2-primary);
  opacity: 0.08;
  top: -10%;
  left: -10%;
  animation-delay: 0s;
}

.v2-mesh-blob-2 {
  width: 500px;
  height: 500px;
  background: var(--v2-accent-purple);
  opacity: 0.06;
  bottom: -5%;
  right: -5%;
  animation-delay: -5s;
}

.v2-mesh-blob-3 {
  width: 400px;
  height: 400px;
  background: var(--v2-primary);
  opacity: 0.05;
  top: 50%;
  left: 50%;
  animation-delay: -10s;
}

@keyframes meshFloat {
  0%, 100% {
    transform: translate(0, 0) rotate(0deg) scale(1);
  }
  33% {
    transform: translate(2%, 2%) rotate(120deg) scale(1.05);
  }
  66% {
    transform: translate(-1%, 3%) rotate(240deg) scale(0.95);
  }
}

@keyframes blobFloat {
  0%, 100% {
    transform: translate(0, 0) scale(1);
  }
  25% {
    transform: translate(10%, -10%) scale(1.1);
  }
  50% {
    transform: translate(-5%, 15%) scale(0.9);
  }
  75% {
    transform: translate(-15%, -5%) scale(1.05);
  }
}

/* ========================================
   CARD STYLES
   ======================================== */

.v2-card {
  position: relative;
  background: var(--v2-bg-card);
  border: 1px solid var(--v2-border);
  border-radius: 24px;
  padding: 24px;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  transition: 
    transform 0.4s var(--v2-smooth),
    border-color 0.3s var(--v2-smooth),
    box-shadow 0.4s var(--v2-smooth);
  overflow: hidden;
}

.v2-card::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 24px;
  padding: 1px;
  background: linear-gradient(135deg, var(--v2-border-strong), transparent 50%, var(--v2-border));
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  pointer-events: none;
}

.v2-card:hover {
  transform: translateY(-4px);
  border-color: var(--v2-border-strong);
  box-shadow: 
    0 20px 40px -15px rgba(0, 0, 0, 0.3),
    0 0 60px -20px var(--v2-primary-glow);
}

/* Grid Layout for Card to utilize full width */
.v2-card-grid {
  display: grid;
  grid-template-columns: auto 1fr;
  grid-template-rows: auto auto;
  grid-template-areas: 
    "date content"
    "avatars avatars";
  gap: 0;
  align-items: start;
  padding: 20px;
}

@media (min-width: 640px) {
  .v2-card-grid {
    padding: 24px;
  }
}

.v2-date-area {
  grid-area: date;
  margin-right: 12px;
}

.v2-content-area {
  grid-area: content;
  min-width: 0;
  padding-right: 8px;
}

.v2-avatar-action-area {
  grid-area: avatars;
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--v2-border);
  gap: 12px;
}

/* Time & Status Row */
.v2-time-status-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 8px;
}

/* Time Display with Split AM/PM for Mobile */
.v2-time-display-split {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  font-weight: 600;
  color: var(--v2-text-primary);
}

.v2-time-split-layout {
  display: flex;
  flex-direction: row;
  align-items: baseline;
  gap: 8px;
  font-size: 18px;
}

@media (max-width: 479px) {
  .v2-time-split-layout {
    flex-direction: column;
    gap: 0;
    font-size: 16px;
  }
}

/* Time values row - times and separator */
.v2-time-values-row {
  display: flex;
  align-items: baseline;
  gap: 8px;
}

@media (max-width: 479px) {
  .v2-time-values-row {
    gap: 12px;
  }
}

.v2-time-value {
  font-weight: 600;
}

/* Separator between times */
.v2-time-split-separator {
  color: var(--v2-text-muted);
  font-weight: 400;
}

/* Periods row - AM/PM */
.v2-time-periods-row {
  display: none;
}

@media (max-width: 479px) {
  .v2-time-periods-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 2px;
  }
  
  .v2-time-period {
    font-size: 14px;
    opacity: 0.9;
    font-weight: 500;
    min-width: 38px;
  }
  
  .v2-time-period-spacer {
    width: 12px;
  }
}

/* Location with text wrap */
.v2-location-wrap {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  color: var(--v2-text-secondary);
  font-size: 14px;
  margin-bottom: 12px;
}

.v2-location-text {
  word-break: break-word;
  line-height: 1.4;
}

/* Status badge - ensure it doesn't get cut off */
.v2-status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  white-space: nowrap;
  flex-shrink: 0;
  margin-left: 4px;
}

/* ========================================
   DATE DISPLAY
   ======================================== */

.v2-date-badge {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background: var(--v2-bg-card-hover);
  border: 1px solid var(--v2-border);
  border-radius: 16px;
  padding: 12px 16px;
  min-width: 64px;
}

.v2-date-day {
  font-size: 28px;
  font-weight: 700;
  line-height: 1;
  color: var(--v2-primary);
}

.v2-date-month {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--v2-text-secondary);
  margin-top: 4px;
}

.v2-date-weekday {
  font-size: 10px;
  font-weight: 500;
  color: var(--v2-text-muted);
  margin-top: 2px;
}

/* ========================================
   TIME DISPLAY
   ======================================== */

.v2-time-display {
  font-size: 18px;
  font-weight: 600;
  color: var(--v2-text-primary);
  display: flex;
  align-items: center;
  gap: 8px;
}

.v2-time-separator {
  color: var(--v2-text-muted);
  font-weight: 400;
}

/* ========================================
   JOIN BUTTON - MORPHING
   ======================================== */

.v2-join-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  height: 48px;
  padding: 0 28px;
  background: var(--v2-primary);
  color: var(--v2-bg-deep);
  font-weight: 700;
  font-size: 14px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border: none;
  border-radius: 24px;
  cursor: pointer;
  overflow: hidden;
  transition: 
    width 0.5s var(--v2-spring),
    height 0.3s var(--v2-spring),
    border-radius 0.4s var(--v2-spring),
    background 0.3s var(--v2-smooth),
    transform 0.2s var(--v2-smooth);
  box-shadow: 
    0 4px 20px -5px var(--v2-primary-glow),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.v2-join-btn:hover {
  transform: scale(1.05);
  box-shadow: 
    0 8px 30px -8px var(--v2-primary-glow),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.v2-join-btn:active {
  transform: scale(0.95);
}

.v2-join-btn.joined {
  width: 48px;
  padding: 0;
  background: var(--v2-success);
  border-radius: 50%;
}

.v2-join-btn-text {
  white-space: nowrap;
  transition: 
    opacity 0.2s var(--v2-smooth),
    transform 0.3s var(--v2-spring);
}

.v2-join-btn.joined .v2-join-btn-text {
  opacity: 0;
  transform: scale(0);
}

.v2-join-btn-check {
  position: absolute;
  opacity: 0;
  transform: scale(0) rotate(-180deg);
  transition: 
    opacity 0.3s var(--v2-smooth),
    transform 0.4s var(--v2-spring);
}

.v2-join-btn.joined .v2-join-btn-check {
  opacity: 1;
  transform: scale(1) rotate(0deg);
}

/* Particle burst effect */
.v2-join-btn-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.v2-particle {
  position: absolute;
  width: 6px;
  height: 6px;
  background: var(--v2-primary);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  opacity: 0;
}

.v2-particle.animate {
  animation: particleBurst 0.6s var(--v2-smooth) forwards;
}

@keyframes particleBurst {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  100% {
    transform: translate(
      calc(-50% + var(--tx)), 
      calc(-50% + var(--ty))
    ) scale(0);
    opacity: 0;
  }
}

/* ========================================
   AVATAR STACK
   ======================================== */

.v2-avatar-stack {
  display: flex;
  align-items: center;
}

.v2-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid var(--v2-bg-card);
  background: linear-gradient(135deg, var(--v2-accent-purple), var(--v2-primary-dim));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  color: var(--v2-text-primary);
  margin-left: -10px;
  transition: 
    transform 0.3s var(--v2-spring),
    margin 0.3s var(--v2-spring);
}

.v2-avatar:first-child {
  margin-left: 0;
}

.v2-avatar-stack:hover .v2-avatar {
  margin-left: 4px;
}

.v2-avatar-stack:hover .v2-avatar:first-child {
  margin-left: 0;
}

.v2-avatar-more {
  background: var(--v2-bg-card-hover);
  font-size: 10px;
}

/* ========================================
   STATUS BADGES
   ======================================== */

.v2-status {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  border-radius: 20px;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  white-space: nowrap;
  flex-shrink: 0;
}

.v2-status-text {
  display: inline;
}

/* Neon Sign Style - Electric Green with subtle flicker */
.v2-status-open {
  position: relative;
  background: rgba(0, 0, 0, 0.4);
  color: #39ff14;
  border: 1.5px solid #39ff14;
  border-radius: 20px;
  padding: 6px 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  text-shadow: 
    0 0 4px #39ff14,
    0 0 8px rgba(57, 255, 20, 0.8);
  box-shadow: 
    0 0 4px #39ff14,
    0 0 8px rgba(57, 255, 20, 0.4),
    inset 0 0 4px rgba(57, 255, 20, 0.1);
  animation: neonFlicker 7s infinite;
}

/* Inner glow tube effect */
.v2-status-open::before {
  content: '';
  position: absolute;
  inset: 2px;
  border-radius: 16px;
  background: linear-gradient(180deg, rgba(57, 255, 20, 0.1), rgba(57, 255, 20, 0.02));
  pointer-events: none;
}

/* Neon dot */
.v2-status-open .v2-status-dot {
  background: #39ff14;
  box-shadow: 
    0 0 4px #39ff14,
    0 0 8px rgba(57, 255, 20, 0.8);
  animation: neonDotFlicker 7s infinite;
}

/* Different flicker patterns for each badge using nth-child */
.v2-card:nth-child(1) .v2-status-open,
.v2-card:nth-child(4) .v2-status-open {
  animation-delay: 0s;
}
.v2-card:nth-child(1) .v2-status-open .v2-status-dot,
.v2-card:nth-child(4) .v2-status-open .v2-status-dot {
  animation-delay: 0s;
}

.v2-card:nth-child(2) .v2-status-open,
.v2-card:nth-child(5) .v2-status-open {
  animation-delay: -2.3s;
}
.v2-card:nth-child(2) .v2-status-open .v2-status-dot,
.v2-card:nth-child(5) .v2-status-open .v2-status-dot {
  animation-delay: -2.3s;
}

.v2-card:nth-child(3) .v2-status-open,
.v2-card:nth-child(6) .v2-status-open {
  animation-delay: -4.7s;
}
.v2-card:nth-child(3) .v2-status-open .v2-status-dot,
.v2-card:nth-child(6) .v2-status-open .v2-status-dot {
  animation-delay: -4.7s;
}

/* Subtle neon flicker animation - slower and varied */
@keyframes neonFlicker {
  0%, 25%, 27%, 30%, 32%, 55%, 57%, 63%, 65%, 100% {
    opacity: 1;
    text-shadow: 
      0 0 4px #39ff14,
      0 0 8px rgba(57, 255, 20, 0.8);
    box-shadow: 
      0 0 4px #39ff14,
      0 0 8px rgba(57, 255, 20, 0.4),
      inset 0 0 4px rgba(57, 255, 20, 0.1);
  }
  26%, 31%, 56%, 64% {
    opacity: 0.88;
    text-shadow: 
      0 0 2px #39ff14;
    box-shadow: 
      0 0 2px #39ff14,
      inset 0 0 2px rgba(57, 255, 20, 0.05);
  }
}

@keyframes neonDotFlicker {
  0%, 25%, 27%, 30%, 32%, 55%, 57%, 63%, 65%, 100% {
    opacity: 1;
    box-shadow: 
      0 0 4px #39ff14,
      0 0 8px rgba(57, 255, 20, 0.8);
  }
  26%, 31%, 56%, 64% {
    opacity: 0.6;
    box-shadow: 
      0 0 2px #39ff14;
  }
}

/* Coral theme neon variant */
.v2-status-full {
  background: rgba(255, 0, 110, 0.15);
  color: var(--v2-danger);
  border: 1px solid rgba(255, 0, 110, 0.3);
}

.v2-status-closed {
  background: rgba(255, 255, 255, 0.08);
  color: var(--v2-text-muted);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.v2-status-draft {
  background: rgba(255, 209, 102, 0.18);
  color: var(--v2-warning);
  border: 1px solid rgba(255, 209, 102, 0.32);
}

.v2-status-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  animation: pulseDot 2s ease-in-out infinite;
}

.v2-status-open .v2-status-dot {
  background: var(--v2-success);
}

@keyframes pulseDot {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(0.8);
  }
}

/* ========================================
   LOCATION & DETAILS
   ======================================== */

.v2-location {
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--v2-text-secondary);
  font-size: 14px;
}

.v2-location-icon {
  color: var(--v2-primary);
  opacity: 0.8;
}

.v2-courts {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-top: 8px;
}

.v2-courts-row {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 10px;
}

.v2-courts-row .v2-courts {
  flex: 1;
  min-width: 0;
}

.v2-courts-admin-actions {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-top: 8px;
}

@media (max-width: 767px) {
  .v2-courts-row {
    flex-direction: column;
  }

  .v2-courts-admin-actions {
    align-self: flex-end;
    margin-top: 4px;
  }
}

.v2-court-tag {
  padding: 4px 10px;
  background: var(--v2-bg-card-hover);
  border: 1px solid var(--v2-border);
  border-radius: 12px;
  font-size: 11px;
  font-weight: 600;
  color: var(--v2-text-secondary);
}

/* ========================================
   STAGGERED ENTRANCE ANIMATIONS
   ======================================== */

.v2-fade-up {
  opacity: 0;
  transform: translateY(30px);
}

.v2-fade-up.animate {
  animation: fadeUp 0.6s var(--v2-spring) forwards;
}

@keyframes fadeUp {
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.v2-scale-in {
  opacity: 0;
  transform: scale(0.9);
}

.v2-scale-in.animate {
  animation: scaleIn 0.5s var(--v2-spring) forwards;
}

@keyframes scaleIn {
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Stagger delays */
.v2-stagger-1 { animation-delay: 0.05s; }
.v2-stagger-2 { animation-delay: 0.1s; }
.v2-stagger-3 { animation-delay: 0.15s; }
.v2-stagger-4 { animation-delay: 0.2s; }
.v2-stagger-5 { animation-delay: 0.25s; }
.v2-stagger-6 { animation-delay: 0.3s; }

/* ========================================
   THEME SWITCHER
   ======================================== */

.v2-theme-switch {
  position: relative;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 6px;
  background: var(--v2-bg-card);
  border: 1px solid var(--v2-border);
  border-radius: 30px;
}

.v2-theme-option {
  position: relative;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid transparent;
  cursor: pointer;
  transition: transform 0.3s var(--v2-spring);
}

.v2-theme-option:hover {
  transform: scale(1.1);
}

.v2-theme-option.active {
  border-color: var(--v2-text-primary);
}

.v2-theme-lime {
  background: linear-gradient(135deg, #ccff00, #9d4edd);
}

.v2-theme-indicator {
  position: absolute;
  width: 4px;
  height: 4px;
  background: var(--v2-primary);
  border-radius: 50%;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  transition: opacity 0.3s;
}

.v2-theme-option:not(.active) .v2-theme-indicator {
  opacity: 0;
}

/* ========================================
   HEADER
   ======================================== */

.v2-header {
  position: relative;
  z-index: 10;
  padding: 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.v2-logo {
  font-size: 24px;
  font-weight: 700;
  letter-spacing: -0.02em;
}

.v2-logo-accent {
  color: var(--v2-primary);
}

/* ========================================
   SCROLLBAR
   ======================================== */

.v2-page::-webkit-scrollbar {
  width: 8px;
}

.v2-page::-webkit-scrollbar-track {
  background: var(--v2-bg-deep);
}

.v2-page::-webkit-scrollbar-thumb {
  background: var(--v2-border-strong);
  border-radius: 4px;
}

.v2-page::-webkit-scrollbar-thumb:hover {
  background: var(--v2-primary-dim);
}

/* ========================================
   CONFETTI CANVAS
   ======================================== */

.v2-confetti-canvas {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 10000;
}

/* ========================================
   UTILITY
   ======================================== */

.v2-container {
  position: relative;
  z-index: 1;
  max-width: 800px;
  margin: 0 auto;
  padding: 0 24px 48px;
}

.v2-section-title {
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.15em;
  color: var(--v2-text-muted);
  margin-bottom: 16px;
}

/* ========================================
   SKELETON SHIMMER
   ======================================== */

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}

.animate-shimmer {
  animation: shimmer 2s infinite;
}

/* ========================================
   AVATAR STACK (2 lines, up to 9, with overlap)
   ======================================== */

/* Avatar Stack Wrapper - both rows expand together */
.v2-avatar-stack-wrapper {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.v2-avatar-stack-wrapper:hover .v2-avatar-stack-row .v2-avatar-stack-item,
.v2-avatar-stack-wrapper:active .v2-avatar-stack-row .v2-avatar-stack-item {
  margin-left: 4px;
}

.v2-avatar-stack-wrapper:hover .v2-avatar-stack-row .v2-avatar-stack-item:first-child,
.v2-avatar-stack-wrapper:active .v2-avatar-stack-row .v2-avatar-stack-item:first-child {
  margin-left: 0;
}

/* Player Count Text - inline at end of avatar row */
.v2-avatar-row-with-text {
  display: flex;
  align-items: center;
  gap: 4px;
}

.v2-player-count-text-inline {
  font-size: 11px;
  font-weight: 500;
  color: var(--v2-text-muted);
  margin-left: 8px;
  transition: opacity 0.2s var(--v2-smooth);
  white-space: nowrap;
}

@media (min-width: 640px) {
  .v2-player-count-text-inline {
    font-size: 12px;
  }
}

/* Hide text when avatar stack is hovered or tapped */
.v2-avatar-stack-wrapper:hover .v2-player-count-text-inline,
.v2-avatar-stack-wrapper:active .v2-player-count-text-inline {
  opacity: 0;
}

.v2-avatar-stack-row {
  display: flex;
  align-items: center;
}

.v2-avatar-stack-item {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 2px solid var(--v2-bg-card);
  background: linear-gradient(135deg, var(--v2-accent-purple), var(--v2-primary-dim));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  color: var(--v2-text-primary);
  margin-left: -10px;
  transition: 
    transform 0.3s var(--v2-spring),
    margin 0.3s var(--v2-spring);
  cursor: default;
}

.v2-avatar-stack-item:first-child {
  margin-left: 0;
}

.v2-avatar-stack-item:hover {
  transform: scale(1.15);
  z-index: 10;
}

.v2-avatar-image {
  width: 100%;
  height: 100%;
  border-radius: 9999px;
  object-fit: cover;
}

/* Responsive Join Button */
.v2-join-btn-responsive {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-height: 44px;
  padding: 8px 14px;
  background: var(--v2-primary);
  color: var(--v2-bg-deep);
  font-weight: 700;
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.02em;
  border: none;
  border-radius: 22px;
  cursor: pointer;
  overflow: hidden;
  transition: 
    transform 0.2s var(--v2-smooth),
    box-shadow 0.3s var(--v2-smooth);
  box-shadow: 
    0 4px 20px -5px var(--v2-primary-glow),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  white-space: nowrap;
  flex-shrink: 0;
}

@media (min-width: 480px) {
  .v2-join-btn-responsive {
    font-size: 12px;
    padding: 10px 18px;
    min-height: 48px;
    border-radius: 24px;
  }
}

@media (min-width: 640px) {
  .v2-join-btn-responsive {
    font-size: 13px;
    padding: 12px 24px;
    min-height: 52px;
  }
}

.v2-join-btn-responsive:hover {
  transform: scale(1.02);
  box-shadow: 
    0 8px 30px -8px var(--v2-primary-glow),
    inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.v2-join-btn-responsive:active {
  transform: scale(0.98);
}

.v2-join-btn-responsive:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.v2-join-btn-text-responsive {
  white-space: nowrap;
  display: block;
}

.v2-card-admin-actions {
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--v2-border);
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: 10px;
}

.v2-admin-chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 32px;
  padding: 0 12px;
  border-radius: 999px;
  border: 1px solid var(--v2-border);
  background: var(--v2-bg-card-hover);
  color: var(--v2-text-primary);
  font-size: 12px;
  font-weight: 600;
}

.v2-admin-chip:hover {
  border-color: var(--v2-border-strong);
}

.v2-admin-chip-danger {
  border-color: rgba(255, 0, 110, 0.45);
  color: #ff7fab;
}

.v2-admin-chip-danger:hover {
  border-color: rgba(255, 0, 110, 0.7);
}

.v2-splitwise-pill {
  display: inline-flex;
  align-items: center;
  border-radius: 999px;
  padding: 4px 10px;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.05em;
  text-transform: uppercase;
}

.v2-splitwise-created {
  background: rgba(0, 245, 160, 0.16);
  border: 1px solid rgba(0, 245, 160, 0.35);
  color: #8fffd7;
}

.v2-splitwise-failed {
  background: rgba(255, 0, 110, 0.16);
  border: 1px solid rgba(255, 0, 110, 0.35);
  color: #ff8eb8;
}

.v2-splitwise-pending {
  background: rgba(255, 209, 102, 0.14);
  border: 1px solid rgba(255, 209, 102, 0.35);
  color: #ffe2a3;
}

/* ========================================
   DIALOG / BOTTOM SHEET
   ======================================== */

.v2-dialog-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  background: rgba(0, 0, 0, 0.75);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 8px;
  overflow: hidden;
  /* Reset any inherited transforms */
  transform: none;
  /* Performance optimization */
  will-change: opacity;
}

@media (min-width: 480px) {
  .v2-dialog-overlay {
    padding: 16px;
  }
}

.v2-dialog-content {
  width: 100%;
  max-width: 100%;
  max-height: 85vh;
  background: rgba(13, 6, 18, 0.95);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid var(--v2-border);
  border-radius: 16px;
  padding: 12px;
  overflow-y: auto;
  overflow-x: hidden;
  position: relative;
  margin: auto;
  /* Prevent horizontal scroll */
  box-sizing: border-box;
  box-shadow: 
    0 25px 50px -12px rgba(0, 0, 0, 0.5),
    0 0 0 1px rgba(255, 255, 255, 0.05);
  /* Performance optimization */
  will-change: transform, opacity;
  transform: translateZ(0);
}

.v2-admin-dialog-content {
  width: min(900px, calc(100vw - 24px));
  max-height: 90vh;
  overflow-y: auto;
  background: rgba(13, 6, 18, 0.97);
  border: 1px solid var(--v2-border);
  border-radius: 24px;
  padding: 20px;
  box-shadow:
    0 30px 60px -20px rgba(0, 0, 0, 0.55),
    0 0 0 1px rgba(255, 255, 255, 0.05);
}

.v2-admin-nav {
  padding: 6px;
  border-radius: 999px;
  border: 1px solid var(--v2-border);
  background: var(--v2-bg-card);
  width: fit-content;
}

.v2-admin-nav a,
.v2-admin-nav button {
  border-color: var(--v2-border) !important;
  color: var(--v2-text-primary) !important;
  background: transparent !important;
}

.v2-admin-nav a.bg-emerald-500 {
  background: var(--v2-primary) !important;
  color: var(--v2-bg-deep) !important;
  border-color: transparent !important;
}

.v2-admin-grid {
  display: grid;
  gap: 12px;
}

@media (min-width: 768px) {
  .v2-admin-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.v2-admin-field {
  display: flex;
  flex-direction: column;
  gap: 6px;
  font-size: 13px;
  font-weight: 600;
  color: var(--v2-text-secondary);
}

.v2-admin-field-full {
  grid-column: 1 / -1;
}

.v2-admin-input,
.v2-admin-select {
  width: 100%;
  min-height: 40px;
  border-radius: 12px;
  border: 1px solid var(--v2-border);
  background: rgba(255, 255, 255, 0.04);
  padding: 0 12px;
  color: var(--v2-text-primary);
}

.v2-admin-select {
  color-scheme: dark;
}

.v2-admin-select option {
  background: #120a1d;
  color: #f8fafc;
}

.v2-admin-input::placeholder {
  color: var(--v2-text-muted);
}

.v2-admin-time-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 8px;
}

.v2-admin-help {
  font-size: 11px;
  color: var(--v2-text-muted);
}

.v2-admin-help-warning {
  color: #ffd166;
}

.v2-admin-court-card {
  display: grid;
  gap: 12px;
  border-radius: 16px;
  border: 1px solid var(--v2-border);
  background: rgba(255, 255, 255, 0.02);
  padding: 12px;
}

@media (min-width: 768px) {
  .v2-admin-court-card {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

.v2-admin-actions {
  margin-top: 16px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.v2-inline-message {
  font-size: 13px;
  color: var(--v2-text-secondary);
}

.v2-inline-error {
  margin-top: 10px;
  font-size: 12px;
  color: #ff8eb8;
}

.v2-card-muted {
  border-radius: 12px;
  border: 1px dashed var(--v2-border);
  padding: 12px;
  color: var(--v2-text-muted);
  font-size: 13px;
}

@media (min-width: 480px) {
  .v2-dialog-content {
    padding: 16px;
    border-radius: 20px;
  }
}

@media (min-width: 480px) {
  .v2-dialog-content {
    max-width: 420px;
  }
}

@media (min-width: 640px) {
  .v2-dialog-content {
    max-width: 500px;
    max-height: 80vh;
    padding: 24px;
    border-radius: 24px;
  }
}

.v2-dialog-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  margin-bottom: 16px;
}

@media (min-width: 640px) {
  .v2-dialog-header {
    margin-bottom: 24px;
  }
}

.v2-dialog-title {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 4px;
}

@media (min-width: 640px) {
  .v2-dialog-title {
    font-size: 24px;
  }
}

.v2-dialog-subtitle {
  font-size: 13px;
  color: var(--v2-text-secondary);
}

@media (min-width: 640px) {
  .v2-dialog-subtitle {
    font-size: 14px;
  }
}

.v2-dialog-close {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: 1px solid var(--v2-border);
  background: var(--v2-bg-card-hover);
  color: var(--v2-text-secondary);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s var(--v2-smooth);
}

@media (min-width: 640px) {
  .v2-dialog-close {
    width: 36px;
    height: 36px;
  }
}

.v2-dialog-close:hover {
  background: var(--v2-border);
  color: var(--v2-text-primary);
}

/* Player Selection Grid */
.v2-player-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-bottom: 16px;
  /* Prevent overflow */
  width: 100%;
  min-width: 0;
}

@media (min-width: 480px) {
  .v2-player-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }
}

@media (min-width: 640px) {
  .v2-player-grid {
    /* Keep 3 columns like mobile for consistent card shape */
    grid-template-columns: repeat(3, 1fr);
    gap: 12px;
  }
}

.v2-player-option {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 16px 4px;
  border-radius: 12px;
  border: 2px solid var(--v2-border);
  background: var(--v2-bg-card-hover);
  cursor: pointer;
  transition: all 0.2s var(--v2-smooth);
  position: relative;
  /* Prevent overflow */
  min-width: 0;
  overflow: hidden;
}

@media (min-width: 640px) {
  .v2-player-option {
    gap: 8px;
    padding: 16px 8px;
    border-radius: 16px;
  }
}

.v2-player-option:hover {
  border-color: var(--v2-border-strong);
  transform: translateY(-2px);
}

.v2-player-option:active {
  transform: translateY(0) scale(0.98);
  transition-duration: 0.1s;
}

.v2-player-option.selected {
  border-color: var(--v2-primary);
  background: rgba(204, 255, 0, 0.1);
}

.v2-player-option-avatar {
  width: 48px;
  height: 48px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--v2-accent-purple), var(--v2-primary-dim));
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  color: var(--v2-text-primary);
  position: relative;
}

.v2-player-option-avatar-image {
  width: 100%;
  height: 100%;
  border-radius: 9999px;
  object-fit: cover;
}

@media (min-width: 640px) {
  .v2-player-option-avatar {
    width: 56px;
    height: 56px;
    font-size: 16px;
  }
}

.v2-player-option.selected .v2-player-option-avatar {
  box-shadow: 0 0 0 3px var(--v2-primary);
}

.v2-player-option-check {
  position: absolute;
  bottom: -4px;
  right: -4px;
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--v2-primary);
  color: var(--v2-bg-deep);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  opacity: 0;
  transform: scale(0);
  transition: all 0.3s var(--v2-spring);
}

@media (min-width: 640px) {
  .v2-player-option-check {
    width: 24px;
    height: 24px;
    font-size: 14px;
  }
}

.v2-player-option.selected .v2-player-option-check {
  opacity: 1;
  transform: scale(1);
}

.v2-player-option-name {
  font-size: 11px;
  font-weight: 600;
  text-align: center;
  color: var(--v2-text-primary);
  /* Truncate long names */
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding: 0 2px;
}

@media (min-width: 640px) {
  .v2-player-option-name {
    font-size: 13px;
  }
}

.v2-player-option-status {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--v2-text-muted);
}

@media (min-width: 640px) {
  .v2-player-option-status {
    font-size: 10px;
  }
}

.v2-player-option.selected .v2-player-option-status {
  color: var(--v2-primary);
}

/* Dialog Actions Row - Submit + Guest inline */
.v2-dialog-actions-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  padding-top: 12px;
  border-top: 1px solid var(--v2-border);
  /* Prevent overflow */
  min-width: 0;
}

@media (min-width: 640px) {
  .v2-dialog-actions-row {
    padding-top: 16px;
    gap: 12px;
  }
}

.v2-dialog-btn {
  height: 40px;
  padding: 0 16px;
  border-radius: 20px;
  border: none;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  cursor: pointer;
  transition: all 0.2s var(--v2-smooth);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  flex-shrink: 0;
}

@media (min-width: 640px) {
  .v2-dialog-btn {
    height: 48px;
    padding: 0 32px;
    border-radius: 24px;
    font-size: 14px;
    gap: 8px;
  }
}

.v2-dialog-btn-primary {
  background: var(--v2-primary);
  color: var(--v2-bg-deep);
}

.v2-dialog-btn-primary:hover {
  transform: scale(1.02);
  box-shadow: 0 8px 30px -8px var(--v2-primary-glow);
}

.v2-dialog-btn-primary:active {
  transform: scale(0.98);
}

/* Inline Guest Controls */
.v2-guest-wrapper-inline {
  flex-shrink: 0;
}

.v2-add-guest-btn-inline {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 40px;
  padding: 0 12px;
  background: var(--v2-bg-card-hover);
  border: 1px solid var(--v2-border);
  border-radius: 20px;
  color: var(--v2-text-secondary);
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s var(--v2-smooth);
  white-space: nowrap;
}

.v2-add-guest-btn-inline:hover {
  border-color: var(--v2-border-strong);
  color: var(--v2-text-primary);
}

.v2-add-guest-btn-inline:active {
  transform: scale(0.98);
}

@media (min-width: 640px) {
  .v2-add-guest-btn-inline {
    height: 48px;
    padding: 0 16px;
    font-size: 14px;
    border-radius: 24px;
  }
}

.v2-add-guest-btn-inline:hover {
  border-color: var(--v2-border-strong);
  color: var(--v2-text-primary);
  background: var(--v2-border);
}

.v2-guest-controls-inline {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 40px;
  padding: 0 8px;
  background: var(--v2-bg-card-hover);
  border: 1px solid var(--v2-border);
  border-radius: 20px;
}

@media (min-width: 640px) {
  .v2-guest-controls-inline {
    height: 48px;
    padding: 0 16px;
    border-radius: 24px;
    gap: 8px;
  }
}

.v2-guest-btn-inline {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  border: 1px solid var(--v2-border);
  background: var(--v2-bg-card);
  color: var(--v2-text-primary);
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s var(--v2-smooth);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

@media (min-width: 640px) {
  .v2-guest-btn-inline {
    width: 32px;
    height: 32px;
    font-size: 16px;
  }
}

.v2-guest-btn-inline:hover {
  background: var(--v2-border);
}

.v2-guest-btn-inline:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.v2-guest-count-inline {
  font-size: 12px;
  font-weight: 700;
  min-width: 60px;
  text-align: center;
  color: var(--v2-text-primary);
  white-space: nowrap;
}

@media (min-width: 640px) {
  .v2-guest-count-inline {
    font-size: 14px;
    min-width: 100px;
  }
}

/* ========================================
   ADMIN PAGE THEME OVERRIDES
   ======================================== */

.v2-admin-page {
  position: relative;
  min-height: 100vh;
  color: var(--v2-text-primary);
}

.v2-admin-page .v2-admin-navbar {
  width: fit-content;
  max-width: 100%;
}

.v2-admin-page .v2-admin-tab-nav button {
  transition:
    transform 0.2s var(--v2-smooth),
    border-color 0.2s var(--v2-smooth),
    background-color 0.2s var(--v2-smooth);
}

.v2-admin-page .v2-admin-tab-nav button:hover {
  transform: translateY(-1px);
  border-color: var(--v2-border-strong) !important;
}

.v2-admin-page .card,
.v2-admin-page .card-muted {
  border: 1px solid var(--v2-border) !important;
  background: rgba(21, 10, 35, 0.72) !important;
  box-shadow:
    0 24px 48px -24px rgba(0, 0, 0, 0.65),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

.v2-admin-page .card-muted {
  background: rgba(18, 9, 30, 0.68) !important;
}

.v2-admin-page .border-slate-200,
.v2-admin-page .border-slate-200\/70,
.v2-admin-page .border-slate-200\/80,
.v2-admin-page .dark\:border-ink-700\/60 {
  border-color: var(--v2-border) !important;
}

.v2-admin-page .text-slate-400,
.v2-admin-page .text-slate-500,
.v2-admin-page .text-slate-600,
.v2-admin-page .text-slate-700,
.v2-admin-page .dark\:text-slate-300,
.v2-admin-page .dark\:text-slate-100 {
  color: var(--v2-text-secondary) !important;
}

.v2-admin-page .bg-slate-50,
.v2-admin-page .bg-slate-100,
.v2-admin-page .bg-slate-100\/70,
.v2-admin-page .bg-white {
  background: rgba(17, 9, 28, 0.9) !important;
}

.v2-admin-page .bg-emerald-500 {
  background: linear-gradient(135deg, var(--v2-primary), #e8ff6c) !important;
  color: var(--v2-bg-deep) !important;
  box-shadow: 0 14px 30px -16px var(--v2-primary-glow);
}

.v2-admin-page .text-emerald-500,
.v2-admin-page .text-emerald-600 {
  color: var(--v2-primary) !important;
}

.v2-admin-page input[type="text"],
.v2-admin-page input[type="password"],
.v2-admin-page input[type="number"],
.v2-admin-page input[type="email"],
.v2-admin-page input[type="search"],
.v2-admin-page input[type="datetime-local"],
.v2-admin-page input[type="time"],
.v2-admin-page select,
.v2-admin-page textarea {
  border: 1px solid var(--v2-border) !important;
  background: rgba(13, 7, 21, 0.82) !important;
  color: var(--v2-text-primary) !important;
}

.v2-admin-page select {
  color-scheme: dark;
}

.v2-admin-page select option {
  background: #120a1d;
  color: #f8fafc;
}

.v2-admin-page input::placeholder,
.v2-admin-page textarea::placeholder {
  color: var(--v2-text-muted) !important;
}

.v2-admin-page input[type="checkbox"] {
  accent-color: var(--v2-primary);
}

.v2-admin-page input[type="file"]::file-selector-button {
  border: 1px solid transparent;
  border-radius: 999px;
  background: linear-gradient(135deg, var(--v2-primary), #e8ff6c);
  color: var(--v2-bg-deep);
}

.v2-admin-page .overflow-x-auto.rounded-2xl.border,
.v2-admin-page .overflow-hidden.rounded-2xl.border,
.v2-admin-page details,
.v2-admin-page pre {
  border-color: var(--v2-border) !important;
  background: rgba(12, 7, 22, 0.72) !important;
}

.v2-admin-page thead {
  background: rgba(255, 255, 255, 0.04) !important;
  color: var(--v2-text-secondary) !important;
}

.v2-admin-page tbody tr {
  border-color: var(--v2-border) !important;
}

.v2-admin-page code {
  color: rgba(248, 250, 252, 0.92);
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .v2-mesh-gradient,
  .v2-mesh-blob {
    animation: none;
  }
  
  .v2-fade-up,
  .v2-scale-in {
    opacity: 1;
    transform: none;
  }
  
  .v2-fade-up.animate,
  .v2-scale-in.animate {
    animation: none;
  }
  
  .v2-card {
    transition: none;
  }
}
